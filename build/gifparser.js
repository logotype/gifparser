!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gifparser=t():e.gifparser=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e),this.cursor={counter:0},this.arrayBuffer=null}return o(e,[{key:"parseFromArrayBuffer",value:function(e){if(!(e&&e instanceof ArrayBuffer))throw new Error("No ArrayBuffer specified!");return this.arrayBuffer=e,this.dataView=new DataView(this.arrayBuffer),this._parse()}},{key:"_addCounter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cursor.counter+=e,this.cursor.counter++}},{key:"_getBit",value:function(e,t){return e>>t&1}},{key:"_getHex",value:function(e){var t=e.toString(16);return(1===t.length?"0"+t:""+t).toUpperCase()}},{key:"_getUint8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.dataView.getUint8(this._addCounter(e))}},{key:"_getUint16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.dataView.getUint16(this.cursor.counter,t);return this._addCounter(e),r}},{key:"_getInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.dataView.getInt16(this.cursor.counter,t);return this._addCounter(e),r}},{key:"_getASCII",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",r=0;r<e;r++)t+=String.fromCharCode(this._getUint8(0));return t}},{key:"_peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.dataView.getUint8(this.cursor.counter+e)}},{key:"_validateBlock",value:function(e){var t=this;return!e.map(function(e,r){return t._peek(r)===e}).some(function(e){return!1===e})}},{key:"_parse",value:function(){throw new Error("_parse has to be overridden!")}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},s=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this.extensionIntroducer=null,this.extensionLabel=null,this._parse()}},{key:"_validateBlock",value:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_validateBlock",this).call(this,r);return o&&(this.extensionIntroducer=this._getUint8(0),this.extensionLabel=this._getUint8(0)),o}}]),t}(f.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),f=n(s),l=r(3),c=n(l),p=r(4),h=n(p),_=r(5),y=n(_),b=r(6),d=n(b),g=r(7),v=n(g),O=r(8),w=n(O),E=r(9),m=n(E),T=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.colorTable=[],e.header=new c.default,e.applicationExtension=new h.default,e.graphicControlExtension=new w.default,e.commentExtension=new y.default,e.plainTextExtension=new d.default,e.logicalScreenDescriptor=new m.default,e.globalColorTable=new v.default,e}return a(t,e),u(t,[{key:"_parse",value:function(){var e={data:[]},r=this.header.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView);e.header=r;var n=this.logicalScreenDescriptor.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView);e.logicalScreenDescriptorData=n;var o=this._getUint8(1);e.backgroundColorIndex=o;var i=this._getUint8(0);e.aspectRatio=i;var a=null;for(e.globalColorTableData=null,n.globalColorTable&&(a=this.globalColorTable.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView,n.globalColorTableBytes),e.globalColorTableData=a);this.cursor.counter<this.dataView.byteLength;){var u={name:"UNKNOWN",data:[]},s=null;switch(this._peek()){case t.EXTENSION_INTRODUCER:switch(u.name="EXTENSION_INTRODUCER",this._peek(1)){case t.GRAPHIC_CONTROL_EXTENSION:s=this.graphicControlExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),u.data.push({name:"GRAPHIC_CONTROL_EXTENSION",data:s});break;case t.PLAINTEXT_EXTENSION:s=this.plainTextExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),u.data.push({name:"PLAINTEXT_EXTENSION",data:s});break;case t.APPLICATION_EXTENSION:s=this.applicationExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),u.data.push({name:"APPLICATION_EXTENSION",data:s});break;case t.COMMENT_EXTENSION:s=this.commentExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),u.data.push({name:"COMMENT_EXTENSION",data:s});break;case t.IMAGE_DESCRIPTOR:u.data.push({name:"IMAGE_DESCRIPTOR",data:null})}break;case t.BLOCK_TERMINATOR:u.name="BLOCK_TERMINATOR";break;case t.TRAILER:u.name="TRAILER"}this._addCounter(),"UNKNOWN"!==u.name&&e.data.push(u)}return e}}]),t}(f.default);T.EXTENSION_INTRODUCER=33,T.IMAGE_DESCRIPTOR=44,T.TRAILER=59,T.GRAPHIC_CONTROL_EXTENSION=249,T.APPLICATION_EXTENSION=255,T.COMMENT_EXTENSION=254,T.PLAINTEXT_EXTENSION=1,T.BLOCK_TERMINATOR=0,t.default=T},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e=this._getASCII(3),t=this._getASCII(3),r=null,n=null,o=null;return r="GIF"===e&&("87a"===t||"89a"===t),n=this._getUint16(1,!0),o=this._getUint16(1,!0),{valid:r,signature:e,version:t,width:n,height:o}}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){this._validateBlock(33,255,11);var e=(this._getUint8(0),this._getASCII(8)),t=this._getASCII(3),r=this._getUint8(0);if("NETSCAPE"===e&&"2.0"===t){this._getUint8(0),this._getUint8(1)}else if("XMP Data"===e&&"XMP"===t)for(var n="",o=0;o<r&&0!==this._peek(0);o++)n+=String.fromCharCode(this._getUint8(0));else for(var i="",a=0;a<r&&0!==this._peek(0);a++)i+=String.fromCharCode(this._getUint8(0));this._getUint8(0)}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e={valid:!0};this._validateBlock(33,254)||(e.valid=!1),e.extensionIntroducer="0x"+this.extensionIntroducer.toString(16),e.extensionLabel="0x"+this.extensionLabel.toString(16)+" (Comment Extension)";var t=this._getUint8(0);e.blockSize=t;for(var r="",n=0;n<t;n++)r+=String.fromCharCode(this._getUint8(0));e.comment=r;this._getUint8(0);return e}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){this._validateBlock(33,1);for(var e=this._getUint8(0),t=(this._getUint16(1,!0),this._getUint16(1,!0),this._getUint16(1,!0),this._getUint16(1,!0),this._getUint8(0),this._getUint8(0),this._getUint8(0),this._getUint8(0),""),r=0;r<e;r++)t+=String.fromCharCode(this._getUint8(0));this._getUint8(0)}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r,n){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this.byteLength=n,this._parse()}},{key:"_parse",value:function(){for(var e=[],t=0,r=this.cursor.counter;r<this.cursor.counter+this.byteLength;r+=3){var n=this.dataView.getUint8(r),o=this.dataView.getUint8(r+1),i=this.dataView.getUint8(r+2),a="#"+this._getHex(n)+this._getHex(o)+this._getHex(i);e.push({index:t,hex:a,red:n,green:o,blue:i}),t++}return e}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e={valid:!0};this._validateBlock(33,249,4)||(e.valid=!1),e.extensionIntroducer="0x"+this.extensionIntroducer.toString(16),e.extensionLabel="0x"+this.extensionLabel.toString(16)+" (Graphic Control Extension)";var t=this._getUint8(0);e.blockSize=t;var r=this._getInt16(0,!0),n=new Uint8Array(8);n[0]=this._getBit(r,0),n[1]=this._getBit(r,1),n[2]=this._getBit(r,2),n[3]=this._getBit(r,3),n[4]=this._getBit(r,4),n[5]=this._getBit(r,5),n[6]=this._getBit(r,6),n[7]=this._getBit(r,7),e.reserved3=n[7],e.reserved2=n[6],e.reserved1=n[5],e.disposalMethod3=n[4],e.disposalMethod2=n[3],e.disposalMethod1=n[2],e.userInputFlag=n[1],e.transparentColor=n[0];var o=this._getUint8(0);e.delayTime=o,e.delayTimePerFrameMs=10*o,this._addCounter(0);var i=this._getUint8(0);e.transparentColorIndex=i;this._getUint8(0);return e}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e=this._getUint16(0,!0),t=new Uint8Array(8);t[0]=this._getBit(e,0),t[1]=this._getBit(e,1),t[2]=this._getBit(e,2),t[3]=this._getBit(e,3),t[4]=this._getBit(e,4),t[5]=this._getBit(e,5),t[6]=this._getBit(e,6),t[7]=this._getBit(e,7);var r=(t[0]?1:0)+(t[1]?2:0)+(t[2]?4:0),n=Math.pow(2,r+1),o=3*n,i=(t[4]?1:0)+(t[5]?2:0)+(t[6]?4:0),a=r+1;return{globalColorTable:t[7],globalColorTableSorting:t[3],globalColorTableSize:n,globalColorTableSizeDescription:n+" colors (0b"+t[2]+t[1]+t[0]+", bit-size "+r+")",globalColorTableBytes:o,colorResolution:a,colorResolutionDescription:a+" bits/pixel (0b"+t[6]+t[5]+t[4]+", bit-size "+i+")"}}}]),t}(s.default);t.default=f}])});
//# sourceMappingURL=gifparser.js.map