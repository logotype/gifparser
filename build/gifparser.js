!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gifparser=t():e.gifparser=t()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=r(3),f=o(c),p=r(4),h=o(p),y=r(2),b=o(y),_=r(6),g=o(_),d=r(5),v=o(d),w=function(e){function t(){n(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.colorTable=[],e.header=new f["default"],e.graphicsControlExtension=new g["default"],e.commentExtension=new v["default"],e.logicalScreenDescriptor=new h["default"],e.globalColorTable=new b["default"],e}return a(t,e),u(t,[{key:"_parse",value:function(){var e=this.header.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),r=this.logicalScreenDescriptor.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView),o=this._getUint8(1),n=this._getUint8(0),i=null;for(r.globalColorTable&&(i=this.globalColorTable.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView,r.globalColorTableBytes)),console.log("signature: "+e.signature),console.log("version: "+e.version),console.log("width: "+e.width+" pixels"),console.log("height: "+e.height+" pixels"),console.log("logical screen descriptor: ",r),console.log("bkg color index: "+o),console.log("aspect ratio: "+n),console.log("color table: ",i);this.cursor.counter<this.dataView.byteLength;){switch(this._peek()){case t.EXTENSION_INTRODUCER:switch(console.log("0x21 Extension Block"),this._peek(1)){case t.GRAPHIC_CONTROL_EXTENSION:console.log("     0xF9 Graphics Control Extension"),this.graphicsControlExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView);break;case t.PLAINTEXT_EXTENSION:console.log("     0x01 Plain Text Extension");break;case t.APPLICATION_EXTENSION:console.log("     0xFF Application Extension");break;case t.COMMENT_EXTENSION:console.log("     0xFE Comment Extension"),this.commentExtension.parseFromArrayBuffer(this.arrayBuffer,this.cursor,this.dataView);break;default:console.log("     0x",this._peek(1).toString(16))}break;case t.TRAILER:console.log("0x3B Trailer")}this._addCounter()}console.log("-----------------------------------------------")}}]),t}(l["default"]);w.EXTENSION_INTRODUCER=33,w.IMAGE_DESCRIPTOR=44,w.TRAILER=59,w.GRAPHIC_CONTROL_EXTENSION=249,w.APPLICATION_EXTENSION=255,w.COMMENT_EXTENSION=254,w.PLAINTEXT_EXTENSION=1,t["default"]=w},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(){function e(){r(this,e),this.cursor={counter:0},this.arrayBuffer=null}return o(e,[{key:"parseFromArrayBuffer",value:function(e){this.arrayBuffer=e,this.dataView=new DataView(this.arrayBuffer),this._parse()}},{key:"_addCounter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cursor.counter+=e,this.cursor.counter++}},{key:"_getBit",value:function(e,t){return e>>t&1}},{key:"_getHex",value:function(e){var t=e.toString(16);return(1===t.length?"0"+t:""+t).toUpperCase()}},{key:"_getUint8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.dataView.getUint8(this._addCounter(e))}},{key:"_getUint16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.dataView.getUint16(this.cursor.counter,t);return this._addCounter(e),r}},{key:"_peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.dataView.getUint8(this.cursor.counter+e)}},{key:"_parse",value:function(){throw new Error("_parse has to be overridden!")}}]),e}();t["default"]=n},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parseFromArrayBuffer",value:function(e,t,r,o){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this.byteLength=o,this._parse()}},{key:"_parse",value:function(){for(var e=[],t=0,r=this.cursor.counter;r<this.cursor.counter+this.byteLength;r+=3){var o=this.dataView.getUint8(r),n=this.dataView.getUint8(r+1),i=this.dataView.getUint8(r+2),a="#"+this._getHex(o)+this._getHex(n)+this._getHex(i);e.push({index:t,hex:a,red:o,green:n,blue:i}),t++}return e}}]),t}(l["default"]);t["default"]=c},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e=null,t=null,r=null,o=null,n=null;return e=String.fromCharCode(this._getUint8())+String.fromCharCode(this._getUint8())+String.fromCharCode(this._getUint8()),t=String.fromCharCode(this._getUint8())+String.fromCharCode(this._getUint8())+String.fromCharCode(this._getUint8()),r="GIF"===e&&("87a"===t||"89a"===t),o=this._getUint16(1,!0),n=this._getUint16(1,!0),{valid:r,signature:e,version:t,width:o,height:n}}}]),t}(l["default"]);t["default"]=c},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=!0,f=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){return this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_parse",value:function(){var e=this.dataView.getUint16(this.cursor.counter,!0),t=new Uint8Array(8);t[0]=this._getBit(e,0),t[1]=this._getBit(e,1),t[2]=this._getBit(e,2),t[3]=this._getBit(e,3),t[4]=this._getBit(e,4),t[5]=this._getBit(e,5),t[6]=this._getBit(e,6),t[7]=this._getBit(e,7),c&&(console.log(t[0]+" size of global color table"),console.log(t[1]+" size of global color table"),console.log(t[2]+" size of global color table"),console.log(t[3]+" sort flag"),console.log(t[4]+" color resolution"),console.log(t[5]+" color resolution"),console.log(t[6]+" color resolution"),console.log(t[7]+" global color table flag"));var r=(t[0]?1:0)+(t[1]?2:0)+(t[2]?4:0),o=Math.pow(2,r+1),n=3*o,i=(t[4]?1:0)+(t[5]?2:0)+(t[6]?4:0),a=Math.pow(2,i+1);return{globalColorTable:t[7],globalColorTableSorting:t[3],globalColorTableSize:o+" colors (0b"+t[2]+t[1]+t[0]+", bit-size "+r+")",globalColorTableBytes:n,colorResolution:a+" bits/pixel (0b"+t[6]+t[5]+t[4]+", bit-size "+i+")"}}}]),t}(l["default"]);t["default"]=f},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_validateBlock",value:function(){return 33===this._peek()&&254===this._peek(1)}},{key:"_parse",value:function(){if(!this._validateBlock())throw new Error("wrong Comment Extension");var e="";this._addCounter(2);for(var t=0;t<16277216&&0!==this._peek();t++){var r=this._getUint8(0);e+=String.fromCharCode(r)}console.log("     -> Data: "+e),console.log("     -> Comment Extension is valid")}}]),t}(l["default"]);t["default"]=c},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),l=o(s),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parseFromArrayBuffer",value:function(e,t,r){this.arrayBuffer=e,this.cursor=t,this.dataView=r,this._parse()}},{key:"_validateBlock",value:function(){return 33===this._peek()&&249===this._peek(1)}},{key:"_parse",value:function(){if(!this._validateBlock())throw new Error("wrong GCE");console.log("     -> GCE is valid")}}]),t}(l["default"]);t["default"]=c}])});
//# sourceMappingURL=gifparser.js.map